name: PR Status Comment

on:
  pull_request_target:
    types: [opened, reopened]

permissions:
  contents: read
  issues: write
  pull-requests: write

jobs:
  create-status:
    runs-on: ubuntu-latest
    steps:
      - name: Create initial status comment
        uses: actions/github-script@v7
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          script: |
            const statusComment = `## ğŸš€ PR Status Dashboard

| Workflow | Status | Duration | Details |
|----------|--------|----------|---------|
| ğŸ·ï¸ Label PRs | â³ Running | - | [View](https://github.com/${context.repo.owner}/${context.repo.repo}/actions) |
| ğŸ”“ Gatekeeper | â³ Running | - | [View](https://github.com/${context.repo.owner}/${context.repo.repo}/actions) |
| ğŸ§¹ Lint Check | â³ Pending | - | [View](https://github.com/${context.repo.owner}/${context.repo.repo}/actions) |
| ğŸ—ï¸ Build Check | â³ Pending | - | [View](https://github.com/${context.repo.owner}/${context.repo.repo}/actions) |
| ğŸ”’ Security Check | â³ Pending | - | [View](https://github.com/${context.repo.owner}/${context.repo.repo}/actions) |
| ğŸš€ Vercel Deploy | â³ Pending | - | [View](https://github.com/${context.repo.owner}/${context.repo.repo}/actions) |

*This comment will be updated automatically as workflows complete.*

---
**Legend:** â³ Running â€¢ âœ… Passed â€¢ âŒ Failed â€¢ â¸ï¸ Skipped
`;

            await github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: statusComment
            });
